{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = global || self, global.keyboardJS = factory());\n})(this, function () {\n  'use strict';\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n    return _typeof(obj);\n  }\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n  }\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n    return arr2;\n  }\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var KeyCombo = /*#__PURE__*/function () {\n    function KeyCombo(keyComboStr) {\n      _classCallCheck(this, KeyCombo);\n      this.sourceStr = keyComboStr;\n      this.subCombos = KeyCombo.parseComboStr(keyComboStr);\n      this.keyNames = this.subCombos.reduce(function (memo, nextSubCombo) {\n        return memo.concat(nextSubCombo);\n      }, []);\n    }\n    _createClass(KeyCombo, [{\n      key: \"check\",\n      value: function check(pressedKeyNames) {\n        var startingKeyNameIndex = 0;\n        for (var i = 0; i < this.subCombos.length; i += 1) {\n          startingKeyNameIndex = this._checkSubCombo(this.subCombos[i], startingKeyNameIndex, pressedKeyNames);\n          if (startingKeyNameIndex === -1) {\n            return false;\n          }\n        }\n        return true;\n      }\n    }, {\n      key: \"isEqual\",\n      value: function isEqual(otherKeyCombo) {\n        if (!otherKeyCombo || typeof otherKeyCombo !== 'string' && _typeof(otherKeyCombo) !== 'object') {\n          return false;\n        }\n        if (typeof otherKeyCombo === 'string') {\n          otherKeyCombo = new KeyCombo(otherKeyCombo);\n        }\n        if (this.subCombos.length !== otherKeyCombo.subCombos.length) {\n          return false;\n        }\n        for (var i = 0; i < this.subCombos.length; i += 1) {\n          if (this.subCombos[i].length !== otherKeyCombo.subCombos[i].length) {\n            return false;\n          }\n        }\n        for (var _i = 0; _i < this.subCombos.length; _i += 1) {\n          var subCombo = this.subCombos[_i];\n          var otherSubCombo = otherKeyCombo.subCombos[_i].slice(0);\n          for (var j = 0; j < subCombo.length; j += 1) {\n            var keyName = subCombo[j];\n            var index = otherSubCombo.indexOf(keyName);\n            if (index > -1) {\n              otherSubCombo.splice(index, 1);\n            }\n          }\n          if (otherSubCombo.length !== 0) {\n            return false;\n          }\n        }\n        return true;\n      }\n    }, {\n      key: \"_checkSubCombo\",\n      value: function _checkSubCombo(subCombo, startingKeyNameIndex, pressedKeyNames) {\n        subCombo = subCombo.slice(0);\n        pressedKeyNames = pressedKeyNames.slice(startingKeyNameIndex);\n        var endIndex = startingKeyNameIndex;\n        for (var i = 0; i < subCombo.length; i += 1) {\n          var keyName = subCombo[i];\n          if (keyName[0] === '\\\\') {\n            var escapedKeyName = keyName.slice(1);\n            if (escapedKeyName === KeyCombo.comboDeliminator || escapedKeyName === KeyCombo.keyDeliminator) {\n              keyName = escapedKeyName;\n            }\n          }\n          var index = pressedKeyNames.indexOf(keyName);\n          if (index > -1) {\n            subCombo.splice(i, 1);\n            i -= 1;\n            if (index > endIndex) {\n              endIndex = index;\n            }\n            if (subCombo.length === 0) {\n              return endIndex;\n            }\n          }\n        }\n        return -1;\n      }\n    }]);\n    return KeyCombo;\n  }();\n  KeyCombo.comboDeliminator = '>';\n  KeyCombo.keyDeliminator = '+';\n  KeyCombo.parseComboStr = function (keyComboStr) {\n    var subComboStrs = KeyCombo._splitStr(keyComboStr, KeyCombo.comboDeliminator);\n    var combo = [];\n    for (var i = 0; i < subComboStrs.length; i += 1) {\n      combo.push(KeyCombo._splitStr(subComboStrs[i], KeyCombo.keyDeliminator));\n    }\n    return combo;\n  };\n  KeyCombo._splitStr = function (str, deliminator) {\n    var s = str;\n    var d = deliminator;\n    var c = '';\n    var ca = [];\n    for (var ci = 0; ci < s.length; ci += 1) {\n      if (ci > 0 && s[ci] === d && s[ci - 1] !== '\\\\') {\n        ca.push(c.trim());\n        c = '';\n        ci += 1;\n      }\n      c += s[ci];\n    }\n    if (c) {\n      ca.push(c.trim());\n    }\n    return ca;\n  };\n  var Locale = /*#__PURE__*/function () {\n    function Locale(name) {\n      _classCallCheck(this, Locale);\n      this.localeName = name;\n      this.activeTargetKeys = [];\n      this.pressedKeys = [];\n      this._appliedMacros = [];\n      this._keyMap = {};\n      this._killKeyCodes = [];\n      this._macros = [];\n    }\n    _createClass(Locale, [{\n      key: \"bindKeyCode\",\n      value: function bindKeyCode(keyCode, keyNames) {\n        if (typeof keyNames === 'string') {\n          keyNames = [keyNames];\n        }\n        this._keyMap[keyCode] = keyNames;\n      }\n    }, {\n      key: \"bindMacro\",\n      value: function bindMacro(keyComboStr, keyNames) {\n        if (typeof keyNames === 'string') {\n          keyNames = [keyNames];\n        }\n        var handler = null;\n        if (typeof keyNames === 'function') {\n          handler = keyNames;\n          keyNames = null;\n        }\n        var macro = {\n          keyCombo: new KeyCombo(keyComboStr),\n          keyNames: keyNames,\n          handler: handler\n        };\n        this._macros.push(macro);\n      }\n    }, {\n      key: \"getKeyCodes\",\n      value: function getKeyCodes(keyName) {\n        var keyCodes = [];\n        for (var keyCode in this._keyMap) {\n          var index = this._keyMap[keyCode].indexOf(keyName);\n          if (index > -1) {\n            keyCodes.push(keyCode | 0);\n          }\n        }\n        return keyCodes;\n      }\n    }, {\n      key: \"getKeyNames\",\n      value: function getKeyNames(keyCode) {\n        return this._keyMap[keyCode] || [];\n      }\n    }, {\n      key: \"setKillKey\",\n      value: function setKillKey(keyCode) {\n        if (typeof keyCode === 'string') {\n          var keyCodes = this.getKeyCodes(keyCode);\n          for (var i = 0; i < keyCodes.length; i += 1) {\n            this.setKillKey(keyCodes[i]);\n          }\n          return;\n        }\n        this._killKeyCodes.push(keyCode);\n      }\n    }, {\n      key: \"pressKey\",\n      value: function pressKey(keyCode) {\n        if (typeof keyCode === 'string') {\n          var keyCodes = this.getKeyCodes(keyCode);\n          for (var i = 0; i < keyCodes.length; i += 1) {\n            this.pressKey(keyCodes[i]);\n          }\n          return;\n        }\n        this.activeTargetKeys.length = 0;\n        var keyNames = this.getKeyNames(keyCode);\n        for (var _i = 0; _i < keyNames.length; _i += 1) {\n          this.activeTargetKeys.push(keyNames[_i]);\n          if (this.pressedKeys.indexOf(keyNames[_i]) === -1) {\n            this.pressedKeys.push(keyNames[_i]);\n          }\n        }\n        this._applyMacros();\n      }\n    }, {\n      key: \"releaseKey\",\n      value: function releaseKey(keyCode) {\n        if (typeof keyCode === 'string') {\n          var keyCodes = this.getKeyCodes(keyCode);\n          for (var i = 0; i < keyCodes.length; i += 1) {\n            this.releaseKey(keyCodes[i]);\n          }\n        } else {\n          var keyNames = this.getKeyNames(keyCode);\n          var killKeyCodeIndex = this._killKeyCodes.indexOf(keyCode);\n          if (killKeyCodeIndex !== -1) {\n            this.pressedKeys.length = 0;\n          } else {\n            for (var _i2 = 0; _i2 < keyNames.length; _i2 += 1) {\n              var index = this.pressedKeys.indexOf(keyNames[_i2]);\n              if (index > -1) {\n                this.pressedKeys.splice(index, 1);\n              }\n            }\n          }\n          this.activeTargetKeys.length = 0;\n          this._clearMacros();\n        }\n      }\n    }, {\n      key: \"_applyMacros\",\n      value: function _applyMacros() {\n        var macros = this._macros.slice(0);\n        for (var i = 0; i < macros.length; i += 1) {\n          var macro = macros[i];\n          if (macro.keyCombo.check(this.pressedKeys)) {\n            if (macro.handler) {\n              macro.keyNames = macro.handler(this.pressedKeys);\n            }\n            for (var j = 0; j < macro.keyNames.length; j += 1) {\n              if (this.pressedKeys.indexOf(macro.keyNames[j]) === -1) {\n                this.pressedKeys.push(macro.keyNames[j]);\n              }\n            }\n            this._appliedMacros.push(macro);\n          }\n        }\n      }\n    }, {\n      key: \"_clearMacros\",\n      value: function _clearMacros() {\n        for (var i = 0; i < this._appliedMacros.length; i += 1) {\n          var macro = this._appliedMacros[i];\n          if (!macro.keyCombo.check(this.pressedKeys)) {\n            for (var j = 0; j < macro.keyNames.length; j += 1) {\n              var index = this.pressedKeys.indexOf(macro.keyNames[j]);\n              if (index > -1) {\n                this.pressedKeys.splice(index, 1);\n              }\n            }\n            if (macro.handler) {\n              macro.keyNames = null;\n            }\n            this._appliedMacros.splice(i, 1);\n            i -= 1;\n          }\n        }\n      }\n    }]);\n    return Locale;\n  }();\n  var Keyboard = /*#__PURE__*/function () {\n    function Keyboard(targetWindow, targetElement, targetPlatform, targetUserAgent) {\n      _classCallCheck(this, Keyboard);\n      this._locale = null;\n      this._currentContext = '';\n      this._contexts = {};\n      this._listeners = [];\n      this._appliedListeners = [];\n      this._locales = {};\n      this._targetElement = null;\n      this._targetWindow = null;\n      this._targetPlatform = '';\n      this._targetUserAgent = '';\n      this._isModernBrowser = false;\n      this._targetKeyDownBinding = null;\n      this._targetKeyUpBinding = null;\n      this._targetResetBinding = null;\n      this._paused = false;\n      this._contexts.global = {\n        listeners: this._listeners,\n        targetWindow: targetWindow,\n        targetElement: targetElement,\n        targetPlatform: targetPlatform,\n        targetUserAgent: targetUserAgent\n      };\n      this.setContext('global');\n    }\n    _createClass(Keyboard, [{\n      key: \"setLocale\",\n      value: function setLocale(localeName, localeBuilder) {\n        var locale = null;\n        if (typeof localeName === 'string') {\n          if (localeBuilder) {\n            locale = new Locale(localeName);\n            localeBuilder(locale, this._targetPlatform, this._targetUserAgent);\n          } else {\n            locale = this._locales[localeName] || null;\n          }\n        } else {\n          locale = localeName;\n          localeName = locale._localeName;\n        }\n        this._locale = locale;\n        this._locales[localeName] = locale;\n        if (locale) {\n          this._locale.pressedKeys = locale.pressedKeys;\n        }\n        return this;\n      }\n    }, {\n      key: \"getLocale\",\n      value: function getLocale(localName) {\n        localName || (localName = this._locale.localeName);\n        return this._locales[localName] || null;\n      }\n    }, {\n      key: \"bind\",\n      value: function bind(keyComboStr, pressHandler, releaseHandler, preventRepeatByDefault) {\n        if (keyComboStr === null || typeof keyComboStr === 'function') {\n          preventRepeatByDefault = releaseHandler;\n          releaseHandler = pressHandler;\n          pressHandler = keyComboStr;\n          keyComboStr = null;\n        }\n        if (keyComboStr && _typeof(keyComboStr) === 'object' && typeof keyComboStr.length === 'number') {\n          for (var i = 0; i < keyComboStr.length; i += 1) {\n            this.bind(keyComboStr[i], pressHandler, releaseHandler);\n          }\n          return this;\n        }\n        this._listeners.push({\n          keyCombo: keyComboStr ? new KeyCombo(keyComboStr) : null,\n          pressHandler: pressHandler || null,\n          releaseHandler: releaseHandler || null,\n          preventRepeat: false,\n          preventRepeatByDefault: preventRepeatByDefault || false,\n          executingHandler: false\n        });\n        return this;\n      }\n    }, {\n      key: \"addListener\",\n      value: function addListener(keyComboStr, pressHandler, releaseHandler, preventRepeatByDefault) {\n        return this.bind(keyComboStr, pressHandler, releaseHandler, preventRepeatByDefault);\n      }\n    }, {\n      key: \"on\",\n      value: function on(keyComboStr, pressHandler, releaseHandler, preventRepeatByDefault) {\n        return this.bind(keyComboStr, pressHandler, releaseHandler, preventRepeatByDefault);\n      }\n    }, {\n      key: \"bindPress\",\n      value: function bindPress(keyComboStr, pressHandler, preventRepeatByDefault) {\n        return this.bind(keyComboStr, pressHandler, null, preventRepeatByDefault);\n      }\n    }, {\n      key: \"bindRelease\",\n      value: function bindRelease(keyComboStr, releaseHandler) {\n        return this.bind(keyComboStr, null, releaseHandler, preventRepeatByDefault);\n      }\n    }, {\n      key: \"unbind\",\n      value: function unbind(keyComboStr, pressHandler, releaseHandler) {\n        if (keyComboStr === null || typeof keyComboStr === 'function') {\n          releaseHandler = pressHandler;\n          pressHandler = keyComboStr;\n          keyComboStr = null;\n        }\n        if (keyComboStr && _typeof(keyComboStr) === 'object' && typeof keyComboStr.length === 'number') {\n          for (var i = 0; i < keyComboStr.length; i += 1) {\n            this.unbind(keyComboStr[i], pressHandler, releaseHandler);\n          }\n          return this;\n        }\n        for (var _i = 0; _i < this._listeners.length; _i += 1) {\n          var listener = this._listeners[_i];\n          var comboMatches = !keyComboStr && !listener.keyCombo || listener.keyCombo && listener.keyCombo.isEqual(keyComboStr);\n          var pressHandlerMatches = !pressHandler && !releaseHandler || !pressHandler && !listener.pressHandler || pressHandler === listener.pressHandler;\n          var releaseHandlerMatches = !pressHandler && !releaseHandler || !releaseHandler && !listener.releaseHandler || releaseHandler === listener.releaseHandler;\n          if (comboMatches && pressHandlerMatches && releaseHandlerMatches) {\n            this._listeners.splice(_i, 1);\n            _i -= 1;\n          }\n        }\n        return this;\n      }\n    }, {\n      key: \"removeListener\",\n      value: function removeListener(keyComboStr, pressHandler, releaseHandler) {\n        return this.unbind(keyComboStr, pressHandler, releaseHandler);\n      }\n    }, {\n      key: \"off\",\n      value: function off(keyComboStr, pressHandler, releaseHandler) {\n        return this.unbind(keyComboStr, pressHandler, releaseHandler);\n      }\n    }, {\n      key: \"setContext\",\n      value: function setContext(contextName) {\n        if (this._locale) {\n          this.releaseAllKeys();\n        }\n        if (!this._contexts[contextName]) {\n          var globalContext = this._contexts.global;\n          this._contexts[contextName] = {\n            listeners: [],\n            targetWindow: globalContext.targetWindow,\n            targetElement: globalContext.targetElement,\n            targetPlatform: globalContext.targetPlatform,\n            targetUserAgent: globalContext.targetUserAgent\n          };\n        }\n        var context = this._contexts[contextName];\n        this._currentContext = contextName;\n        this._listeners = context.listeners;\n        this.stop();\n        this.watch(context.targetWindow, context.targetElement, context.targetPlatform, context.targetUserAgent);\n        return this;\n      }\n    }, {\n      key: \"getContext\",\n      value: function getContext() {\n        return this._currentContext;\n      }\n    }, {\n      key: \"withContext\",\n      value: function withContext(contextName, callback) {\n        var previousContextName = this.getContext();\n        this.setContext(contextName);\n        callback();\n        this.setContext(previousContextName);\n        return this;\n      }\n    }, {\n      key: \"watch\",\n      value: function watch(targetWindow, targetElement, targetPlatform, targetUserAgent) {\n        var _this = this;\n        this.stop();\n        var win = typeof globalThis !== 'undefined' ? globalThis : typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : {};\n        if (!targetWindow) {\n          if (!win.addEventListener && !win.attachEvent) {\n            // This was added so when using things like JSDOM watch can be used to configure watch\n            // for the global namespace manually.\n            if (this._currentContext === 'global') {\n              return;\n            }\n            throw new Error('Cannot find window functions addEventListener or attachEvent.');\n          }\n          targetWindow = win;\n        } // Handle element bindings where a target window is not passed\n\n        if (typeof targetWindow.nodeType === 'number') {\n          targetUserAgent = targetPlatform;\n          targetPlatform = targetElement;\n          targetElement = targetWindow;\n          targetWindow = win;\n        }\n        if (!targetWindow.addEventListener && !targetWindow.attachEvent) {\n          throw new Error('Cannot find addEventListener or attachEvent methods on targetWindow.');\n        }\n        this._isModernBrowser = !!targetWindow.addEventListener;\n        var userAgent = targetWindow.navigator && targetWindow.navigator.userAgent || '';\n        var platform = targetWindow.navigator && targetWindow.navigator.platform || '';\n        targetElement && targetElement !== null || (targetElement = targetWindow.document);\n        targetPlatform && targetPlatform !== null || (targetPlatform = platform);\n        targetUserAgent && targetUserAgent !== null || (targetUserAgent = userAgent);\n        this._targetKeyDownBinding = function (event) {\n          _this.pressKey(event.keyCode, event);\n          _this._handleCommandBug(event, platform);\n        };\n        this._targetKeyUpBinding = function (event) {\n          _this.releaseKey(event.keyCode, event);\n        };\n        this._targetResetBinding = function (event) {\n          _this.releaseAllKeys(event);\n        };\n        this._bindEvent(targetElement, 'keydown', this._targetKeyDownBinding);\n        this._bindEvent(targetElement, 'keyup', this._targetKeyUpBinding);\n        this._bindEvent(targetWindow, 'focus', this._targetResetBinding);\n        this._bindEvent(targetWindow, 'blur', this._targetResetBinding);\n        this._targetElement = targetElement;\n        this._targetWindow = targetWindow;\n        this._targetPlatform = targetPlatform;\n        this._targetUserAgent = targetUserAgent;\n        var currentContext = this._contexts[this._currentContext];\n        currentContext.targetWindow = this._targetWindow;\n        currentContext.targetElement = this._targetElement;\n        currentContext.targetPlatform = this._targetPlatform;\n        currentContext.targetUserAgent = this._targetUserAgent;\n        return this;\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        if (!this._targetElement || !this._targetWindow) {\n          return;\n        }\n        this._unbindEvent(this._targetElement, 'keydown', this._targetKeyDownBinding);\n        this._unbindEvent(this._targetElement, 'keyup', this._targetKeyUpBinding);\n        this._unbindEvent(this._targetWindow, 'focus', this._targetResetBinding);\n        this._unbindEvent(this._targetWindow, 'blur', this._targetResetBinding);\n        this._targetWindow = null;\n        this._targetElement = null;\n        return this;\n      }\n    }, {\n      key: \"pressKey\",\n      value: function pressKey(keyCode, event) {\n        if (this._paused) {\n          return this;\n        }\n        if (!this._locale) {\n          throw new Error('Locale not set');\n        }\n        this._locale.pressKey(keyCode);\n        this._applyBindings(event);\n        return this;\n      }\n    }, {\n      key: \"releaseKey\",\n      value: function releaseKey(keyCode, event) {\n        if (this._paused) {\n          return this;\n        }\n        if (!this._locale) {\n          throw new Error('Locale not set');\n        }\n        this._locale.releaseKey(keyCode);\n        this._clearBindings(event);\n        return this;\n      }\n    }, {\n      key: \"releaseAllKeys\",\n      value: function releaseAllKeys(event) {\n        if (this._paused) {\n          return this;\n        }\n        if (!this._locale) {\n          throw new Error('Locale not set');\n        }\n        this._locale.pressedKeys.length = 0;\n        this._clearBindings(event);\n        return this;\n      }\n    }, {\n      key: \"pause\",\n      value: function pause() {\n        if (this._paused) {\n          return this;\n        }\n        if (this._locale) {\n          this.releaseAllKeys();\n        }\n        this._paused = true;\n        return this;\n      }\n    }, {\n      key: \"resume\",\n      value: function resume() {\n        this._paused = false;\n        return this;\n      }\n    }, {\n      key: \"reset\",\n      value: function reset() {\n        this.releaseAllKeys();\n        this._listeners.length = 0;\n        return this;\n      }\n    }, {\n      key: \"_bindEvent\",\n      value: function _bindEvent(targetElement, eventName, handler) {\n        return this._isModernBrowser ? targetElement.addEventListener(eventName, handler, false) : targetElement.attachEvent('on' + eventName, handler);\n      }\n    }, {\n      key: \"_unbindEvent\",\n      value: function _unbindEvent(targetElement, eventName, handler) {\n        return this._isModernBrowser ? targetElement.removeEventListener(eventName, handler, false) : targetElement.detachEvent('on' + eventName, handler);\n      }\n    }, {\n      key: \"_getGroupedListeners\",\n      value: function _getGroupedListeners() {\n        var listenerGroups = [];\n        var listenerGroupMap = [];\n        var listeners = this._listeners;\n        if (this._currentContext !== 'global') {\n          listeners = [].concat(_toConsumableArray(listeners), _toConsumableArray(this._contexts.global.listeners));\n        }\n        listeners.sort(function (a, b) {\n          return (b.keyCombo ? b.keyCombo.keyNames.length : 0) - (a.keyCombo ? a.keyCombo.keyNames.length : 0);\n        }).forEach(function (l) {\n          var mapIndex = -1;\n          for (var i = 0; i < listenerGroupMap.length; i += 1) {\n            if (listenerGroupMap[i] === null && l.keyCombo === null || listenerGroupMap[i] !== null && listenerGroupMap[i].isEqual(l.keyCombo)) {\n              mapIndex = i;\n            }\n          }\n          if (mapIndex === -1) {\n            mapIndex = listenerGroupMap.length;\n            listenerGroupMap.push(l.keyCombo);\n          }\n          if (!listenerGroups[mapIndex]) {\n            listenerGroups[mapIndex] = [];\n          }\n          listenerGroups[mapIndex].push(l);\n        });\n        return listenerGroups;\n      }\n    }, {\n      key: \"_applyBindings\",\n      value: function _applyBindings(event) {\n        var _this2 = this;\n        var preventRepeat = false;\n        event || (event = {});\n        event.preventRepeat = function () {\n          preventRepeat = true;\n        };\n        event.pressedKeys = this._locale.pressedKeys.slice(0);\n        var activeTargetKeys = this._locale.activeTargetKeys;\n        var pressedKeys = this._locale.pressedKeys.slice(0);\n        var listenerGroups = this._getGroupedListeners();\n        var _loop = function _loop(i) {\n          var listeners = listenerGroups[i];\n          var keyCombo = listeners[0].keyCombo;\n          if (keyCombo === null || keyCombo.check(pressedKeys) && activeTargetKeys.some(function (k) {\n            return keyCombo.keyNames.includes(k);\n          })) {\n            for (var j = 0; j < listeners.length; j += 1) {\n              var listener = listeners[j];\n              if (!listener.executingHandler && listener.pressHandler && !listener.preventRepeat) {\n                listener.executingHandler = true;\n                listener.pressHandler.call(_this2, event);\n                listener.executingHandler = false;\n                if (preventRepeat || listener.preventRepeatByDefault) {\n                  listener.preventRepeat = true;\n                  preventRepeat = false;\n                }\n              }\n              if (_this2._appliedListeners.indexOf(listener) === -1) {\n                _this2._appliedListeners.push(listener);\n              }\n            }\n            if (keyCombo) {\n              for (var _j = 0; _j < keyCombo.keyNames.length; _j += 1) {\n                var index = pressedKeys.indexOf(keyCombo.keyNames[_j]);\n                if (index !== -1) {\n                  pressedKeys.splice(index, 1);\n                  _j -= 1;\n                }\n              }\n            }\n          }\n        };\n        for (var i = 0; i < listenerGroups.length; i += 1) {\n          _loop(i);\n        }\n      }\n    }, {\n      key: \"_clearBindings\",\n      value: function _clearBindings(event) {\n        event || (event = {});\n        event.pressedKeys = this._locale.pressedKeys.slice(0);\n        for (var i = 0; i < this._appliedListeners.length; i += 1) {\n          var listener = this._appliedListeners[i];\n          var keyCombo = listener.keyCombo;\n          if (keyCombo === null || !keyCombo.check(this._locale.pressedKeys)) {\n            listener.preventRepeat = false;\n            if (keyCombo !== null || event.pressedKeys.length === 0) {\n              this._appliedListeners.splice(i, 1);\n              i -= 1;\n            }\n            if (!listener.executingHandler && listener.releaseHandler) {\n              listener.executingHandler = true;\n              listener.releaseHandler.call(this, event);\n              listener.executingHandler = false;\n            }\n          }\n        }\n      }\n    }, {\n      key: \"_handleCommandBug\",\n      value: function _handleCommandBug(event, platform) {\n        // On Mac when the command key is kept pressed, keyup is not triggered for any other key.\n        // In this case force a keyup for non-modifier keys directly after the keypress.\n        var modifierKeys = [\"shift\", \"ctrl\", \"alt\", \"capslock\", \"tab\", \"command\"];\n        if (platform.match(\"Mac\") && this._locale.pressedKeys.includes(\"command\") && !modifierKeys.includes(this._locale.getKeyNames(event.keyCode)[0])) {\n          this._targetKeyUpBinding(event);\n        }\n      }\n    }]);\n    return Keyboard;\n  }();\n  function us(locale, platform, userAgent) {\n    // general\n    locale.bindKeyCode(3, ['cancel']);\n    locale.bindKeyCode(8, ['backspace']);\n    locale.bindKeyCode(9, ['tab']);\n    locale.bindKeyCode(12, ['clear']);\n    locale.bindKeyCode(13, ['enter']);\n    locale.bindKeyCode(16, ['shift']);\n    locale.bindKeyCode(17, ['ctrl']);\n    locale.bindKeyCode(18, ['alt', 'menu']);\n    locale.bindKeyCode(19, ['pause', 'break']);\n    locale.bindKeyCode(20, ['capslock']);\n    locale.bindKeyCode(27, ['escape', 'esc']);\n    locale.bindKeyCode(32, ['space', 'spacebar']);\n    locale.bindKeyCode(33, ['pageup']);\n    locale.bindKeyCode(34, ['pagedown']);\n    locale.bindKeyCode(35, ['end']);\n    locale.bindKeyCode(36, ['home']);\n    locale.bindKeyCode(37, ['left']);\n    locale.bindKeyCode(38, ['up']);\n    locale.bindKeyCode(39, ['right']);\n    locale.bindKeyCode(40, ['down']);\n    locale.bindKeyCode(41, ['select']);\n    locale.bindKeyCode(42, ['printscreen']);\n    locale.bindKeyCode(43, ['execute']);\n    locale.bindKeyCode(44, ['snapshot']);\n    locale.bindKeyCode(45, ['insert', 'ins']);\n    locale.bindKeyCode(46, ['delete', 'del']);\n    locale.bindKeyCode(47, ['help']);\n    locale.bindKeyCode(145, ['scrolllock', 'scroll']);\n    locale.bindKeyCode(188, ['comma', ',']);\n    locale.bindKeyCode(190, ['period', '.']);\n    locale.bindKeyCode(191, ['slash', 'forwardslash', '/']);\n    locale.bindKeyCode(192, ['graveaccent', '`']);\n    locale.bindKeyCode(219, ['openbracket', '[']);\n    locale.bindKeyCode(220, ['backslash', '\\\\']);\n    locale.bindKeyCode(221, ['closebracket', ']']);\n    locale.bindKeyCode(222, ['apostrophe', '\\'']); // 0-9\n\n    locale.bindKeyCode(48, ['zero', '0']);\n    locale.bindKeyCode(49, ['one', '1']);\n    locale.bindKeyCode(50, ['two', '2']);\n    locale.bindKeyCode(51, ['three', '3']);\n    locale.bindKeyCode(52, ['four', '4']);\n    locale.bindKeyCode(53, ['five', '5']);\n    locale.bindKeyCode(54, ['six', '6']);\n    locale.bindKeyCode(55, ['seven', '7']);\n    locale.bindKeyCode(56, ['eight', '8']);\n    locale.bindKeyCode(57, ['nine', '9']); // numpad\n\n    locale.bindKeyCode(96, ['numzero', 'num0']);\n    locale.bindKeyCode(97, ['numone', 'num1']);\n    locale.bindKeyCode(98, ['numtwo', 'num2']);\n    locale.bindKeyCode(99, ['numthree', 'num3']);\n    locale.bindKeyCode(100, ['numfour', 'num4']);\n    locale.bindKeyCode(101, ['numfive', 'num5']);\n    locale.bindKeyCode(102, ['numsix', 'num6']);\n    locale.bindKeyCode(103, ['numseven', 'num7']);\n    locale.bindKeyCode(104, ['numeight', 'num8']);\n    locale.bindKeyCode(105, ['numnine', 'num9']);\n    locale.bindKeyCode(106, ['nummultiply', 'num*']);\n    locale.bindKeyCode(107, ['numadd', 'num+']);\n    locale.bindKeyCode(108, ['numenter']);\n    locale.bindKeyCode(109, ['numsubtract', 'num-']);\n    locale.bindKeyCode(110, ['numdecimal', 'num.']);\n    locale.bindKeyCode(111, ['numdivide', 'num/']);\n    locale.bindKeyCode(144, ['numlock', 'num']); // function keys\n\n    locale.bindKeyCode(112, ['f1']);\n    locale.bindKeyCode(113, ['f2']);\n    locale.bindKeyCode(114, ['f3']);\n    locale.bindKeyCode(115, ['f4']);\n    locale.bindKeyCode(116, ['f5']);\n    locale.bindKeyCode(117, ['f6']);\n    locale.bindKeyCode(118, ['f7']);\n    locale.bindKeyCode(119, ['f8']);\n    locale.bindKeyCode(120, ['f9']);\n    locale.bindKeyCode(121, ['f10']);\n    locale.bindKeyCode(122, ['f11']);\n    locale.bindKeyCode(123, ['f12']);\n    locale.bindKeyCode(124, ['f13']);\n    locale.bindKeyCode(125, ['f14']);\n    locale.bindKeyCode(126, ['f15']);\n    locale.bindKeyCode(127, ['f16']);\n    locale.bindKeyCode(128, ['f17']);\n    locale.bindKeyCode(129, ['f18']);\n    locale.bindKeyCode(130, ['f19']);\n    locale.bindKeyCode(131, ['f20']);\n    locale.bindKeyCode(132, ['f21']);\n    locale.bindKeyCode(133, ['f22']);\n    locale.bindKeyCode(134, ['f23']);\n    locale.bindKeyCode(135, ['f24']); // secondary key symbols\n\n    locale.bindMacro('shift + `', ['tilde', '~']);\n    locale.bindMacro('shift + 1', ['exclamation', 'exclamationpoint', '!']);\n    locale.bindMacro('shift + 2', ['at', '@']);\n    locale.bindMacro('shift + 3', ['number', '#']);\n    locale.bindMacro('shift + 4', ['dollar', 'dollars', 'dollarsign', '$']);\n    locale.bindMacro('shift + 5', ['percent', '%']);\n    locale.bindMacro('shift + 6', ['caret', '^']);\n    locale.bindMacro('shift + 7', ['ampersand', 'and', '&']);\n    locale.bindMacro('shift + 8', ['asterisk', '*']);\n    locale.bindMacro('shift + 9', ['openparen', '(']);\n    locale.bindMacro('shift + 0', ['closeparen', ')']);\n    locale.bindMacro('shift + -', ['underscore', '_']);\n    locale.bindMacro('shift + =', ['plus', '+']);\n    locale.bindMacro('shift + [', ['opencurlybrace', 'opencurlybracket', '{']);\n    locale.bindMacro('shift + ]', ['closecurlybrace', 'closecurlybracket', '}']);\n    locale.bindMacro('shift + \\\\', ['verticalbar', '|']);\n    locale.bindMacro('shift + ;', ['colon', ':']);\n    locale.bindMacro('shift + \\'', ['quotationmark', '\\'']);\n    locale.bindMacro('shift + !,', ['openanglebracket', '<']);\n    locale.bindMacro('shift + .', ['closeanglebracket', '>']);\n    locale.bindMacro('shift + /', ['questionmark', '?']);\n    if (platform.match('Mac')) {\n      locale.bindMacro('command', ['mod', 'modifier']);\n    } else {\n      locale.bindMacro('ctrl', ['mod', 'modifier']);\n    } //a-z and A-Z\n\n    for (var keyCode = 65; keyCode <= 90; keyCode += 1) {\n      var keyName = String.fromCharCode(keyCode + 32);\n      var capitalKeyName = String.fromCharCode(keyCode);\n      locale.bindKeyCode(keyCode, keyName);\n      locale.bindMacro('shift + ' + keyName, capitalKeyName);\n      locale.bindMacro('capslock + ' + keyName, capitalKeyName);\n    } // browser caveats\n\n    var semicolonKeyCode = userAgent.match('Firefox') ? 59 : 186;\n    var dashKeyCode = userAgent.match('Firefox') ? 173 : 189;\n    var equalKeyCode = userAgent.match('Firefox') ? 61 : 187;\n    var leftCommandKeyCode;\n    var rightCommandKeyCode;\n    if (platform.match('Mac') && (userAgent.match('Safari') || userAgent.match('Chrome'))) {\n      leftCommandKeyCode = 91;\n      rightCommandKeyCode = 93;\n    } else if (platform.match('Mac') && userAgent.match('Opera')) {\n      leftCommandKeyCode = 17;\n      rightCommandKeyCode = 17;\n    } else if (platform.match('Mac') && userAgent.match('Firefox')) {\n      leftCommandKeyCode = 224;\n      rightCommandKeyCode = 224;\n    }\n    locale.bindKeyCode(semicolonKeyCode, ['semicolon', ';']);\n    locale.bindKeyCode(dashKeyCode, ['dash', '-']);\n    locale.bindKeyCode(equalKeyCode, ['equal', 'equalsign', '=']);\n    locale.bindKeyCode(leftCommandKeyCode, ['command', 'windows', 'win', 'super', 'leftcommand', 'leftwindows', 'leftwin', 'leftsuper']);\n    locale.bindKeyCode(rightCommandKeyCode, ['command', 'windows', 'win', 'super', 'rightcommand', 'rightwindows', 'rightwin', 'rightsuper']); // kill keys\n\n    locale.setKillKey('command');\n  }\n  var keyboard = new Keyboard();\n  keyboard.setLocale('us', us);\n  keyboard.Keyboard = Keyboard;\n  keyboard.Locale = Locale;\n  keyboard.KeyCombo = KeyCombo;\n  return keyboard;\n});","map":{"version":3,"names":["KeyCombo","keyComboStr","_classCallCheck","sourceStr","subCombos","parseComboStr","keyNames","reduce","memo","nextSubCombo","concat","_createClass","key","value","check","pressedKeyNames","startingKeyNameIndex","i","length","_checkSubCombo","isEqual","otherKeyCombo","_typeof","_i","subCombo","otherSubCombo","slice","j","keyName","index","indexOf","splice","endIndex","escapedKeyName","comboDeliminator","keyDeliminator","subComboStrs","_splitStr","combo","push","str","deliminator","s","d","c","ca","ci","trim","Locale","name","localeName","activeTargetKeys","pressedKeys","_appliedMacros","_keyMap","_killKeyCodes","_macros","bindKeyCode","keyCode","bindMacro","handler","macro","keyCombo","getKeyCodes","keyCodes","getKeyNames","setKillKey","pressKey","_applyMacros","releaseKey","killKeyCodeIndex","_i2","_clearMacros","macros","Keyboard","targetWindow","targetElement","targetPlatform","targetUserAgent","_locale","_currentContext","_contexts","_listeners","_appliedListeners","_locales","_targetElement","_targetWindow","_targetPlatform","_targetUserAgent","_isModernBrowser","_targetKeyDownBinding","_targetKeyUpBinding","_targetResetBinding","_paused","global","listeners","setContext","setLocale","localeBuilder","locale","_localeName","getLocale","localName","bind","pressHandler","releaseHandler","preventRepeatByDefault","preventRepeat","executingHandler","addListener","on","bindPress","bindRelease","unbind","listener","comboMatches","pressHandlerMatches","releaseHandlerMatches","removeListener","off","contextName","releaseAllKeys","globalContext","context","stop","watch","getContext","withContext","callback","previousContextName","_this","win","globalThis","window","addEventListener","attachEvent","Error","nodeType","userAgent","navigator","platform","document","event","_handleCommandBug","_bindEvent","currentContext","_unbindEvent","_applyBindings","_clearBindings","pause","resume","reset","eventName","removeEventListener","detachEvent","_getGroupedListeners","listenerGroups","listenerGroupMap","_toConsumableArray","sort","a","b","forEach","l","mapIndex","_this2","_loop","some","k","includes","call","_j","modifierKeys","match","us","String","fromCharCode","capitalKeyName","semicolonKeyCode","dashKeyCode","equalKeyCode","leftCommandKeyCode","rightCommandKeyCode","keyboard"],"sources":["C:\\Users\\Admin\\webdev\\rubberducker\\frontend\\node_modules\\keyboardjs\\lib\\key-combo.js","C:\\Users\\Admin\\webdev\\rubberducker\\frontend\\node_modules\\keyboardjs\\lib\\locale.js","C:\\Users\\Admin\\webdev\\rubberducker\\frontend\\node_modules\\keyboardjs\\lib\\keyboard.js","C:\\Users\\Admin\\webdev\\rubberducker\\frontend\\node_modules\\keyboardjs\\locales\\us.js","C:\\Users\\Admin\\webdev\\rubberducker\\frontend\\node_modules\\keyboardjs\\index.js"],"sourcesContent":["\nexport class KeyCombo {\n  constructor(keyComboStr) {\n    this.sourceStr = keyComboStr;\n    this.subCombos = KeyCombo.parseComboStr(keyComboStr);\n    this.keyNames  = this.subCombos.reduce((memo, nextSubCombo) =>\n      memo.concat(nextSubCombo), []);\n  }\n\n  check(pressedKeyNames) {\n    let startingKeyNameIndex = 0;\n    for (let i = 0; i < this.subCombos.length; i += 1) {\n      startingKeyNameIndex = this._checkSubCombo(\n        this.subCombos[i],\n        startingKeyNameIndex,\n        pressedKeyNames\n      );\n      if (startingKeyNameIndex === -1) { return false; }\n    }\n    return true;\n  };\n\n  isEqual(otherKeyCombo) {\n    if (\n      !otherKeyCombo ||\n      typeof otherKeyCombo !== 'string' &&\n      typeof otherKeyCombo !== 'object'\n    ) { return false; }\n\n    if (typeof otherKeyCombo === 'string') {\n      otherKeyCombo = new KeyCombo(otherKeyCombo);\n    }\n\n    if (this.subCombos.length !== otherKeyCombo.subCombos.length) {\n      return false;\n    }\n    for (let i = 0; i < this.subCombos.length; i += 1) {\n      if (this.subCombos[i].length !== otherKeyCombo.subCombos[i].length) {\n        return false;\n      }\n    }\n\n    for (let i = 0; i < this.subCombos.length; i += 1) {\n      const subCombo      = this.subCombos[i];\n      const otherSubCombo = otherKeyCombo.subCombos[i].slice(0);\n\n      for (let j = 0; j < subCombo.length; j += 1) {\n        const keyName = subCombo[j];\n        const index   = otherSubCombo.indexOf(keyName);\n\n        if (index > -1) {\n          otherSubCombo.splice(index, 1);\n        }\n      }\n      if (otherSubCombo.length !== 0) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  _checkSubCombo(subCombo, startingKeyNameIndex, pressedKeyNames) {\n    subCombo = subCombo.slice(0);\n    pressedKeyNames = pressedKeyNames.slice(startingKeyNameIndex);\n\n    let endIndex = startingKeyNameIndex;\n    for (let i = 0; i < subCombo.length; i += 1) {\n\n      let keyName = subCombo[i];\n      if (keyName[0] === '\\\\') {\n        const escapedKeyName = keyName.slice(1);\n        if (\n          escapedKeyName === KeyCombo.comboDeliminator ||\n          escapedKeyName === KeyCombo.keyDeliminator\n        ) {\n          keyName = escapedKeyName;\n        }\n      }\n\n      const index = pressedKeyNames.indexOf(keyName);\n      if (index > -1) {\n        subCombo.splice(i, 1);\n        i -= 1;\n        if (index > endIndex) {\n          endIndex = index;\n        }\n        if (subCombo.length === 0) {\n          return endIndex;\n        }\n      }\n    }\n    return -1;\n  };\n}\n\nKeyCombo.comboDeliminator = '>';\nKeyCombo.keyDeliminator   = '+';\n\nKeyCombo.parseComboStr = function(keyComboStr) {\n  const subComboStrs = KeyCombo._splitStr(keyComboStr, KeyCombo.comboDeliminator);\n  const combo        = [];\n\n  for (let i = 0 ; i < subComboStrs.length; i += 1) {\n    combo.push(KeyCombo._splitStr(subComboStrs[i], KeyCombo.keyDeliminator));\n  }\n  return combo;\n}\n\nKeyCombo._splitStr = function(str, deliminator) {\n  const s  = str;\n  const d  = deliminator;\n  let c  = '';\n  const ca = [];\n\n  for (let ci = 0; ci < s.length; ci += 1) {\n    if (ci > 0 && s[ci] === d && s[ci - 1] !== '\\\\') {\n      ca.push(c.trim());\n      c = '';\n      ci += 1;\n    }\n    c += s[ci];\n  }\n  if (c) { ca.push(c.trim()); }\n\n  return ca;\n};\n","import { KeyCombo } from './key-combo';\n\n\nexport class Locale {\n  constructor(name) {\n    this.localeName          = name;\n    this.activeTargetKeys = [];\n    this.pressedKeys         = [];\n    this._appliedMacros      = [];\n    this._keyMap             = {};\n    this._killKeyCodes       = [];\n    this._macros             = [];\n  }\n\n  bindKeyCode(keyCode, keyNames) {\n    if (typeof keyNames === 'string') {\n      keyNames = [keyNames];\n    }\n\n    this._keyMap[keyCode] = keyNames;\n  };\n\n  bindMacro(keyComboStr, keyNames) {\n    if (typeof keyNames === 'string') {\n      keyNames = [ keyNames ];\n    }\n\n    let handler = null;\n    if (typeof keyNames === 'function') {\n      handler = keyNames;\n      keyNames = null;\n    }\n\n    const macro = {\n      keyCombo : new KeyCombo(keyComboStr),\n      keyNames : keyNames,\n      handler  : handler\n    };\n\n    this._macros.push(macro);\n  };\n\n  getKeyCodes(keyName) {\n    const keyCodes = [];\n    for (const keyCode in this._keyMap) {\n      const index = this._keyMap[keyCode].indexOf(keyName);\n      if (index > -1) { keyCodes.push(keyCode|0); }\n    }\n    return keyCodes;\n  };\n\n  getKeyNames(keyCode) {\n    return this._keyMap[keyCode] || [];\n  };\n\n  setKillKey(keyCode) {\n    if (typeof keyCode === 'string') {\n      const keyCodes = this.getKeyCodes(keyCode);\n      for (let i = 0; i < keyCodes.length; i += 1) {\n        this.setKillKey(keyCodes[i]);\n      }\n      return;\n    }\n\n    this._killKeyCodes.push(keyCode);\n  };\n\n  pressKey(keyCode) {\n    if (typeof keyCode === 'string') {\n      const keyCodes = this.getKeyCodes(keyCode);\n      for (let i = 0; i < keyCodes.length; i += 1) {\n        this.pressKey(keyCodes[i]);\n      }\n      return;\n    }\n\n    this.activeTargetKeys.length = 0;\n    const keyNames = this.getKeyNames(keyCode);\n    for (let i = 0; i < keyNames.length; i += 1) {\n      this.activeTargetKeys.push(keyNames[i]);\n      if (this.pressedKeys.indexOf(keyNames[i]) === -1) {\n        this.pressedKeys.push(keyNames[i]);\n      }\n    }\n\n    this._applyMacros();\n  };\n\n  releaseKey(keyCode) {\n    if (typeof keyCode === 'string') {\n      const keyCodes = this.getKeyCodes(keyCode);\n      for (let i = 0; i < keyCodes.length; i += 1) {\n        this.releaseKey(keyCodes[i]);\n      }\n\n    } else {\n      const keyNames         = this.getKeyNames(keyCode);\n      const killKeyCodeIndex = this._killKeyCodes.indexOf(keyCode);\n\n      if (killKeyCodeIndex !== -1) {\n        this.pressedKeys.length = 0;\n      } else {\n        for (let i = 0; i < keyNames.length; i += 1) {\n          const index = this.pressedKeys.indexOf(keyNames[i]);\n          if (index > -1) {\n            this.pressedKeys.splice(index, 1);\n          }\n        }\n      }\n\n      this.activeTargetKeys.length = 0;\n      this._clearMacros();\n    }\n  };\n\n  _applyMacros() {\n    const macros = this._macros.slice(0);\n    for (let i = 0; i < macros.length; i += 1) {\n      const macro = macros[i];\n      if (macro.keyCombo.check(this.pressedKeys)) {\n        if (macro.handler) {\n          macro.keyNames = macro.handler(this.pressedKeys);\n        }\n        for (let j = 0; j < macro.keyNames.length; j += 1) {\n          if (this.pressedKeys.indexOf(macro.keyNames[j]) === -1) {\n            this.pressedKeys.push(macro.keyNames[j]);\n          }\n        }\n        this._appliedMacros.push(macro);\n      }\n    }\n  };\n\n  _clearMacros() {\n    for (let i = 0; i < this._appliedMacros.length; i += 1) {\n      const macro = this._appliedMacros[i];\n      if (!macro.keyCombo.check(this.pressedKeys)) {\n        for (let j = 0; j < macro.keyNames.length; j += 1) {\n          const index = this.pressedKeys.indexOf(macro.keyNames[j]);\n          if (index > -1) {\n            this.pressedKeys.splice(index, 1);\n          }\n        }\n        if (macro.handler) {\n          macro.keyNames = null;\n        }\n        this._appliedMacros.splice(i, 1);\n        i -= 1;\n      }\n    }\n  }\n}\n","import { Locale } from './locale';\nimport { KeyCombo } from './key-combo';\n\n\nexport class Keyboard {\n  constructor(targetWindow, targetElement, targetPlatform, targetUserAgent) {\n    this._locale               = null;\n    this._currentContext       = '';\n    this._contexts             = {};\n    this._listeners            = [];\n    this._appliedListeners     = [];\n    this._locales              = {};\n    this._targetElement        = null;\n    this._targetWindow         = null;\n    this._targetPlatform       = '';\n    this._targetUserAgent      = '';\n    this._isModernBrowser      = false;\n    this._targetKeyDownBinding = null;\n    this._targetKeyUpBinding   = null;\n    this._targetResetBinding   = null;\n    this._paused               = false;\n\n    this._contexts.global = {\n      listeners: this._listeners,\n      targetWindow,\n      targetElement,\n      targetPlatform,\n      targetUserAgent\n    };\n\n    this.setContext('global');\n  }\n\n  setLocale(localeName, localeBuilder) {\n    let locale = null;\n    if (typeof localeName === 'string') {\n\n      if (localeBuilder) {\n        locale = new Locale(localeName);\n        localeBuilder(locale, this._targetPlatform, this._targetUserAgent);\n      } else {\n        locale = this._locales[localeName] || null;\n      }\n    } else {\n      locale     = localeName;\n      localeName = locale._localeName;\n    }\n\n    this._locale              = locale;\n    this._locales[localeName] = locale;\n    if (locale) {\n      this._locale.pressedKeys = locale.pressedKeys;\n    }\n\n    return this;\n  }\n\n  getLocale(localName) {\n    localName || (localName = this._locale.localeName);\n    return this._locales[localName] || null;\n  }\n\n  bind(keyComboStr, pressHandler, releaseHandler, preventRepeatByDefault) {\n    if (keyComboStr === null || typeof keyComboStr === 'function') {\n      preventRepeatByDefault = releaseHandler;\n      releaseHandler         = pressHandler;\n      pressHandler           = keyComboStr;\n      keyComboStr            = null;\n    }\n\n    if (\n      keyComboStr &&\n      typeof keyComboStr === 'object' &&\n      typeof keyComboStr.length === 'number'\n    ) {\n      for (let i = 0; i < keyComboStr.length; i += 1) {\n        this.bind(keyComboStr[i], pressHandler, releaseHandler);\n      }\n      return this;\n    }\n\n    this._listeners.push({\n      keyCombo              : keyComboStr ? new KeyCombo(keyComboStr) : null,\n      pressHandler          : pressHandler           || null,\n      releaseHandler        : releaseHandler         || null,\n      preventRepeat         : false,\n      preventRepeatByDefault: preventRepeatByDefault || false,\n      executingHandler      : false\n    });\n\n    return this;\n  }\n\n  addListener(keyComboStr, pressHandler, releaseHandler, preventRepeatByDefault) {\n    return this.bind(keyComboStr, pressHandler, releaseHandler, preventRepeatByDefault);\n  }\n\n  on(keyComboStr, pressHandler, releaseHandler, preventRepeatByDefault) {\n    return this.bind(keyComboStr, pressHandler, releaseHandler, preventRepeatByDefault);\n  }\n\n  bindPress(keyComboStr, pressHandler, preventRepeatByDefault) {\n    return this.bind(keyComboStr, pressHandler, null, preventRepeatByDefault);\n  }\n\n  bindRelease(keyComboStr, releaseHandler) {\n    return this.bind(keyComboStr, null, releaseHandler, preventRepeatByDefault);\n  }\n\n  unbind(keyComboStr, pressHandler, releaseHandler) {\n    if (keyComboStr === null || typeof keyComboStr === 'function') {\n      releaseHandler = pressHandler;\n      pressHandler   = keyComboStr;\n      keyComboStr = null;\n    }\n\n    if (\n      keyComboStr &&\n      typeof keyComboStr === 'object' &&\n      typeof keyComboStr.length === 'number'\n    ) {\n      for (let i = 0; i < keyComboStr.length; i += 1) {\n        this.unbind(keyComboStr[i], pressHandler, releaseHandler);\n      }\n      return this;\n    }\n\n    for (let i = 0; i < this._listeners.length; i += 1) {\n      const listener = this._listeners[i];\n\n      const comboMatches          = !keyComboStr && !listener.keyCombo ||\n                                  listener.keyCombo && listener.keyCombo.isEqual(keyComboStr);\n      const pressHandlerMatches   = !pressHandler && !releaseHandler ||\n                                  !pressHandler && !listener.pressHandler ||\n                                  pressHandler === listener.pressHandler;\n      const releaseHandlerMatches = !pressHandler && !releaseHandler ||\n                                  !releaseHandler && !listener.releaseHandler ||\n                                  releaseHandler === listener.releaseHandler;\n\n      if (comboMatches && pressHandlerMatches && releaseHandlerMatches) {\n        this._listeners.splice(i, 1);\n        i -= 1;\n      }\n    }\n\n    return this;\n  }\n\n  removeListener(keyComboStr, pressHandler, releaseHandler) {\n    return this.unbind(keyComboStr, pressHandler, releaseHandler);\n  }\n\n  off(keyComboStr, pressHandler, releaseHandler) {\n    return this.unbind(keyComboStr, pressHandler, releaseHandler);\n  }\n\n  setContext(contextName) {\n    if(this._locale) { this.releaseAllKeys(); }\n\n    if (!this._contexts[contextName]) {\n      const globalContext = this._contexts.global;\n      this._contexts[contextName] = {\n        listeners      : [],\n        targetWindow   : globalContext.targetWindow,\n        targetElement  : globalContext.targetElement,\n        targetPlatform : globalContext.targetPlatform,\n        targetUserAgent: globalContext.targetUserAgent\n      };\n    }\n\n    const context        = this._contexts[contextName];\n    this._currentContext = contextName;\n    this._listeners      = context.listeners;\n\n    this.stop();\n    this.watch(\n      context.targetWindow,\n      context.targetElement,\n      context.targetPlatform,\n      context.targetUserAgent\n    );\n\n    return this;\n  }\n\n  getContext() {\n    return this._currentContext;\n  }\n\n  withContext(contextName, callback) {\n    const previousContextName = this.getContext();\n    this.setContext(contextName);\n\n    callback();\n\n    this.setContext(previousContextName);\n\n    return this;\n  }\n\n  watch(targetWindow, targetElement, targetPlatform, targetUserAgent) {\n    this.stop();\n\n    const win = typeof globalThis !== 'undefined' ? globalThis :\n                typeof global !== 'undefined' ? global :\n                typeof window !== 'undefined' ? window :\n                {};\n\n    if (!targetWindow) {\n      if (!win.addEventListener && !win.attachEvent) {\n        // This was added so when using things like JSDOM watch can be used to configure watch\n        // for the global namespace manually.\n        if (this._currentContext === 'global') {\n          return\n        }\n        throw new Error('Cannot find window functions addEventListener or attachEvent.');\n      }\n      targetWindow = win;\n    }\n\n    // Handle element bindings where a target window is not passed\n    if (typeof targetWindow.nodeType === 'number') {\n      targetUserAgent = targetPlatform;\n      targetPlatform  = targetElement;\n      targetElement   = targetWindow;\n      targetWindow    = win;\n    }\n\n    if (!targetWindow.addEventListener && !targetWindow.attachEvent) {\n      throw new Error('Cannot find addEventListener or attachEvent methods on targetWindow.');\n    }\n\n    this._isModernBrowser = !!targetWindow.addEventListener;\n\n    const userAgent = targetWindow.navigator && targetWindow.navigator.userAgent || '';\n    const platform  = targetWindow.navigator && targetWindow.navigator.platform  || '';\n\n    targetElement   && targetElement   !== null || (targetElement   = targetWindow.document);\n    targetPlatform  && targetPlatform  !== null || (targetPlatform  = platform);\n    targetUserAgent && targetUserAgent !== null || (targetUserAgent = userAgent);\n\n    this._targetKeyDownBinding = (event) => {\n      this.pressKey(event.keyCode, event);\n      this._handleCommandBug(event, platform);\n    };\n    this._targetKeyUpBinding = (event) => {\n      this.releaseKey(event.keyCode, event);\n    };\n    this._targetResetBinding = (event) => {\n      this.releaseAllKeys(event);\n    };\n\n    this._bindEvent(targetElement, 'keydown', this._targetKeyDownBinding);\n    this._bindEvent(targetElement, 'keyup',   this._targetKeyUpBinding);\n    this._bindEvent(targetWindow,  'focus',   this._targetResetBinding);\n    this._bindEvent(targetWindow,  'blur',    this._targetResetBinding);\n\n    this._targetElement   = targetElement;\n    this._targetWindow    = targetWindow;\n    this._targetPlatform  = targetPlatform;\n    this._targetUserAgent = targetUserAgent;\n\n    const currentContext           = this._contexts[this._currentContext];\n    currentContext.targetWindow    = this._targetWindow;\n    currentContext.targetElement   = this._targetElement;\n    currentContext.targetPlatform  = this._targetPlatform;\n    currentContext.targetUserAgent = this._targetUserAgent;\n\n    return this;\n  }\n\n  stop() {\n    if (!this._targetElement || !this._targetWindow) { return; }\n\n    this._unbindEvent(this._targetElement, 'keydown', this._targetKeyDownBinding);\n    this._unbindEvent(this._targetElement, 'keyup',   this._targetKeyUpBinding);\n    this._unbindEvent(this._targetWindow,  'focus',   this._targetResetBinding);\n    this._unbindEvent(this._targetWindow,  'blur',    this._targetResetBinding);\n\n    this._targetWindow  = null;\n    this._targetElement = null;\n\n    return this;\n  }\n\n  pressKey(keyCode, event) {\n    if (this._paused) { return this; }\n    if (!this._locale) { throw new Error('Locale not set'); }\n\n    this._locale.pressKey(keyCode);\n    this._applyBindings(event);\n\n    return this;\n  }\n\n  releaseKey(keyCode, event) {\n    if (this._paused) { return this; }\n    if (!this._locale) { throw new Error('Locale not set'); }\n\n    this._locale.releaseKey(keyCode);\n    this._clearBindings(event);\n\n    return this;\n  }\n\n  releaseAllKeys(event) {\n    if (this._paused) { return this; }\n    if (!this._locale) { throw new Error('Locale not set'); }\n\n    this._locale.pressedKeys.length = 0;\n    this._clearBindings(event);\n\n    return this;\n  }\n\n  pause() {\n    if (this._paused) { return this; }\n    if (this._locale) { this.releaseAllKeys(); }\n    this._paused = true;\n\n    return this;\n  }\n\n  resume() {\n    this._paused = false;\n\n    return this;\n  }\n\n  reset() {\n    this.releaseAllKeys();\n    this._listeners.length = 0;\n\n    return this;\n  }\n\n  _bindEvent(targetElement, eventName, handler) {\n    return this._isModernBrowser ?\n      targetElement.addEventListener(eventName, handler, false) :\n      targetElement.attachEvent('on' + eventName, handler);\n  }\n\n  _unbindEvent(targetElement, eventName, handler) {\n    return this._isModernBrowser ?\n      targetElement.removeEventListener(eventName, handler, false) :\n      targetElement.detachEvent('on' + eventName, handler);\n  }\n\n  _getGroupedListeners() {\n    const listenerGroups   = [];\n    const listenerGroupMap = [];\n\n    let listeners = this._listeners;\n    if (this._currentContext !== 'global') {\n      listeners = [...listeners, ...this._contexts.global.listeners];\n    }\n\n    listeners.sort(\n      (a, b) =>\n        (b.keyCombo ? b.keyCombo.keyNames.length : 0) -\n        (a.keyCombo ? a.keyCombo.keyNames.length : 0)\n    ).forEach((l) => {\n      let mapIndex = -1;\n      for (let i = 0; i < listenerGroupMap.length; i += 1) {\n        if (listenerGroupMap[i] === null && l.keyCombo === null ||\n            listenerGroupMap[i] !== null && listenerGroupMap[i].isEqual(l.keyCombo)) {\n          mapIndex = i;\n        }\n      }\n      if (mapIndex === -1) {\n        mapIndex = listenerGroupMap.length;\n        listenerGroupMap.push(l.keyCombo);\n      }\n      if (!listenerGroups[mapIndex]) {\n        listenerGroups[mapIndex] = [];\n      }\n      listenerGroups[mapIndex].push(l);\n    });\n\n    return listenerGroups;\n  }\n\n  _applyBindings(event) {\n    let preventRepeat = false;\n\n    event || (event = {});\n    event.preventRepeat = () => { preventRepeat = true; };\n    event.pressedKeys   = this._locale.pressedKeys.slice(0);\n\n    const activeTargetKeys = this._locale.activeTargetKeys;\n    const pressedKeys      = this._locale.pressedKeys.slice(0);\n    const listenerGroups   = this._getGroupedListeners();\n\n    for (let i = 0; i < listenerGroups.length; i += 1) {\n      const listeners = listenerGroups[i];\n      const keyCombo  = listeners[0].keyCombo;\n\n      if (\n        keyCombo === null ||\n        keyCombo.check(pressedKeys) &&\n        activeTargetKeys.some(k => keyCombo.keyNames.includes(k))\n      ) {\n        for (let j = 0; j < listeners.length; j += 1) {\n          let listener = listeners[j];\n\n          if (!listener.executingHandler && listener.pressHandler && !listener.preventRepeat) {\n            listener.executingHandler = true;\n            listener.pressHandler.call(this, event);\n            listener.executingHandler = false;\n\n            if (preventRepeat || listener.preventRepeatByDefault) {\n              listener.preventRepeat = true;\n              preventRepeat          = false;\n            }\n          }\n\n          if (this._appliedListeners.indexOf(listener) === -1) {\n            this._appliedListeners.push(listener);\n          }\n        }\n\n        if (keyCombo) {\n          for (let j = 0; j < keyCombo.keyNames.length; j += 1) {\n            const index = pressedKeys.indexOf(keyCombo.keyNames[j]);\n            if (index !== -1) {\n              pressedKeys.splice(index, 1);\n              j -= 1;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  _clearBindings(event) {\n    event || (event = {});\n    event.pressedKeys = this._locale.pressedKeys.slice(0);\n\n    for (let i = 0; i < this._appliedListeners.length; i += 1) {\n      const listener = this._appliedListeners[i];\n      const keyCombo = listener.keyCombo;\n      if (keyCombo === null || !keyCombo.check(this._locale.pressedKeys)) {\n        listener.preventRepeat = false;\n        if (keyCombo !== null || event.pressedKeys.length === 0) {\n          this._appliedListeners.splice(i, 1);\n          i -= 1;\n        }\n        if (!listener.executingHandler && listener.releaseHandler) {\n          listener.executingHandler = true;\n          listener.releaseHandler.call(this, event);\n          listener.executingHandler = false;\n        }\n      }\n    }\n  }\n\n  _handleCommandBug(event, platform) {\n    // On Mac when the command key is kept pressed, keyup is not triggered for any other key.\n    // In this case force a keyup for non-modifier keys directly after the keypress.\n    const modifierKeys = [\"shift\", \"ctrl\", \"alt\", \"capslock\", \"tab\", \"command\"];\n    if (platform.match(\"Mac\") && this._locale.pressedKeys.includes(\"command\") &&\n        !modifierKeys.includes(this._locale.getKeyNames(event.keyCode)[0])) {\n      this._targetKeyUpBinding(event);\n    }\n  }\n}\n","\nexport function us(locale, platform, userAgent) {\n\n  // general\n  locale.bindKeyCode(3,   ['cancel']);\n  locale.bindKeyCode(8,   ['backspace']);\n  locale.bindKeyCode(9,   ['tab']);\n  locale.bindKeyCode(12,  ['clear']);\n  locale.bindKeyCode(13,  ['enter']);\n  locale.bindKeyCode(16,  ['shift']);\n  locale.bindKeyCode(17,  ['ctrl']);\n  locale.bindKeyCode(18,  ['alt', 'menu']);\n  locale.bindKeyCode(19,  ['pause', 'break']);\n  locale.bindKeyCode(20,  ['capslock']);\n  locale.bindKeyCode(27,  ['escape', 'esc']);\n  locale.bindKeyCode(32,  ['space', 'spacebar']);\n  locale.bindKeyCode(33,  ['pageup']);\n  locale.bindKeyCode(34,  ['pagedown']);\n  locale.bindKeyCode(35,  ['end']);\n  locale.bindKeyCode(36,  ['home']);\n  locale.bindKeyCode(37,  ['left']);\n  locale.bindKeyCode(38,  ['up']);\n  locale.bindKeyCode(39,  ['right']);\n  locale.bindKeyCode(40,  ['down']);\n  locale.bindKeyCode(41,  ['select']);\n  locale.bindKeyCode(42,  ['printscreen']);\n  locale.bindKeyCode(43,  ['execute']);\n  locale.bindKeyCode(44,  ['snapshot']);\n  locale.bindKeyCode(45,  ['insert', 'ins']);\n  locale.bindKeyCode(46,  ['delete', 'del']);\n  locale.bindKeyCode(47,  ['help']);\n  locale.bindKeyCode(145, ['scrolllock', 'scroll']);\n  locale.bindKeyCode(188, ['comma', ',']);\n  locale.bindKeyCode(190, ['period', '.']);\n  locale.bindKeyCode(191, ['slash', 'forwardslash', '/']);\n  locale.bindKeyCode(192, ['graveaccent', '`']);\n  locale.bindKeyCode(219, ['openbracket', '[']);\n  locale.bindKeyCode(220, ['backslash', '\\\\']);\n  locale.bindKeyCode(221, ['closebracket', ']']);\n  locale.bindKeyCode(222, ['apostrophe', '\\'']);\n\n  // 0-9\n  locale.bindKeyCode(48, ['zero', '0']);\n  locale.bindKeyCode(49, ['one', '1']);\n  locale.bindKeyCode(50, ['two', '2']);\n  locale.bindKeyCode(51, ['three', '3']);\n  locale.bindKeyCode(52, ['four', '4']);\n  locale.bindKeyCode(53, ['five', '5']);\n  locale.bindKeyCode(54, ['six', '6']);\n  locale.bindKeyCode(55, ['seven', '7']);\n  locale.bindKeyCode(56, ['eight', '8']);\n  locale.bindKeyCode(57, ['nine', '9']);\n\n  // numpad\n  locale.bindKeyCode(96, ['numzero', 'num0']);\n  locale.bindKeyCode(97, ['numone', 'num1']);\n  locale.bindKeyCode(98, ['numtwo', 'num2']);\n  locale.bindKeyCode(99, ['numthree', 'num3']);\n  locale.bindKeyCode(100, ['numfour', 'num4']);\n  locale.bindKeyCode(101, ['numfive', 'num5']);\n  locale.bindKeyCode(102, ['numsix', 'num6']);\n  locale.bindKeyCode(103, ['numseven', 'num7']);\n  locale.bindKeyCode(104, ['numeight', 'num8']);\n  locale.bindKeyCode(105, ['numnine', 'num9']);\n  locale.bindKeyCode(106, ['nummultiply', 'num*']);\n  locale.bindKeyCode(107, ['numadd', 'num+']);\n  locale.bindKeyCode(108, ['numenter']);\n  locale.bindKeyCode(109, ['numsubtract', 'num-']);\n  locale.bindKeyCode(110, ['numdecimal', 'num.']);\n  locale.bindKeyCode(111, ['numdivide', 'num/']);\n  locale.bindKeyCode(144, ['numlock', 'num']);\n\n  // function keys\n  locale.bindKeyCode(112, ['f1']);\n  locale.bindKeyCode(113, ['f2']);\n  locale.bindKeyCode(114, ['f3']);\n  locale.bindKeyCode(115, ['f4']);\n  locale.bindKeyCode(116, ['f5']);\n  locale.bindKeyCode(117, ['f6']);\n  locale.bindKeyCode(118, ['f7']);\n  locale.bindKeyCode(119, ['f8']);\n  locale.bindKeyCode(120, ['f9']);\n  locale.bindKeyCode(121, ['f10']);\n  locale.bindKeyCode(122, ['f11']);\n  locale.bindKeyCode(123, ['f12']);\n  locale.bindKeyCode(124, ['f13']);\n  locale.bindKeyCode(125, ['f14']);\n  locale.bindKeyCode(126, ['f15']);\n  locale.bindKeyCode(127, ['f16']);\n  locale.bindKeyCode(128, ['f17']);\n  locale.bindKeyCode(129, ['f18']);\n  locale.bindKeyCode(130, ['f19']);\n  locale.bindKeyCode(131, ['f20']);\n  locale.bindKeyCode(132, ['f21']);\n  locale.bindKeyCode(133, ['f22']);\n  locale.bindKeyCode(134, ['f23']);\n  locale.bindKeyCode(135, ['f24']);\n\n  // secondary key symbols\n  locale.bindMacro('shift + `', ['tilde', '~']);\n  locale.bindMacro('shift + 1', ['exclamation', 'exclamationpoint', '!']);\n  locale.bindMacro('shift + 2', ['at', '@']);\n  locale.bindMacro('shift + 3', ['number', '#']);\n  locale.bindMacro('shift + 4', ['dollar', 'dollars', 'dollarsign', '$']);\n  locale.bindMacro('shift + 5', ['percent', '%']);\n  locale.bindMacro('shift + 6', ['caret', '^']);\n  locale.bindMacro('shift + 7', ['ampersand', 'and', '&']);\n  locale.bindMacro('shift + 8', ['asterisk', '*']);\n  locale.bindMacro('shift + 9', ['openparen', '(']);\n  locale.bindMacro('shift + 0', ['closeparen', ')']);\n  locale.bindMacro('shift + -', ['underscore', '_']);\n  locale.bindMacro('shift + =', ['plus', '+']);\n  locale.bindMacro('shift + [', ['opencurlybrace', 'opencurlybracket', '{']);\n  locale.bindMacro('shift + ]', ['closecurlybrace', 'closecurlybracket', '}']);\n  locale.bindMacro('shift + \\\\', ['verticalbar', '|']);\n  locale.bindMacro('shift + ;', ['colon', ':']);\n  locale.bindMacro('shift + \\'', ['quotationmark', '\\'']);\n  locale.bindMacro('shift + !,', ['openanglebracket', '<']);\n  locale.bindMacro('shift + .', ['closeanglebracket', '>']);\n  locale.bindMacro('shift + /', ['questionmark', '?']);\n\n  if (platform.match('Mac')) {\n    locale.bindMacro('command', ['mod', 'modifier']);\n  } else {\n    locale.bindMacro('ctrl', ['mod', 'modifier']);\n  }\n\n  //a-z and A-Z\n  for (let keyCode = 65; keyCode <= 90; keyCode += 1) {\n    var keyName = String.fromCharCode(keyCode + 32);\n    var capitalKeyName = String.fromCharCode(keyCode);\n  \tlocale.bindKeyCode(keyCode, keyName);\n  \tlocale.bindMacro('shift + ' + keyName, capitalKeyName);\n  \tlocale.bindMacro('capslock + ' + keyName, capitalKeyName);\n  }\n\n  // browser caveats\n  const semicolonKeyCode = userAgent.match('Firefox') ? 59  : 186;\n  const dashKeyCode      = userAgent.match('Firefox') ? 173 : 189;\n  const equalKeyCode     = userAgent.match('Firefox') ? 61  : 187;\n  let leftCommandKeyCode;\n  let rightCommandKeyCode;\n  if (platform.match('Mac') && (userAgent.match('Safari') || userAgent.match('Chrome'))) {\n    leftCommandKeyCode  = 91;\n    rightCommandKeyCode = 93;\n  } else if(platform.match('Mac') && userAgent.match('Opera')) {\n    leftCommandKeyCode  = 17;\n    rightCommandKeyCode = 17;\n  } else if(platform.match('Mac') && userAgent.match('Firefox')) {\n    leftCommandKeyCode  = 224;\n    rightCommandKeyCode = 224;\n  }\n  locale.bindKeyCode(semicolonKeyCode,    ['semicolon', ';']);\n  locale.bindKeyCode(dashKeyCode,         ['dash', '-']);\n  locale.bindKeyCode(equalKeyCode,        ['equal', 'equalsign', '=']);\n  locale.bindKeyCode(leftCommandKeyCode,  ['command', 'windows', 'win', 'super', 'leftcommand', 'leftwindows', 'leftwin', 'leftsuper']);\n  locale.bindKeyCode(rightCommandKeyCode, ['command', 'windows', 'win', 'super', 'rightcommand', 'rightwindows', 'rightwin', 'rightsuper']);\n\n  // kill keys\n  locale.setKillKey('command');\n};\n","import { Keyboard } from './lib/keyboard';\nimport { Locale } from './lib/locale';\nimport { KeyCombo } from './lib/key-combo';\nimport { us } from './locales/us';\n\nconst keyboard = new Keyboard();\n\nkeyboard.setLocale('us', us);\n\nkeyboard.Keyboard = Keyboard;\nkeyboard.Locale = Locale;\nkeyboard.KeyCombo = KeyCombo;\n\nexport default keyboard;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}